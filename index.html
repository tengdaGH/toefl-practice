<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TOEFL 2026 Listen & Repeat â€” çš“å®‡</title>
  <style>
    :root { --blue: #2f81f7; --green: #3fb950; --orange: #d29922; --bg: #f6f8fa; --card: #fff; --border: #d0d7de; --text: #1f2328; --muted: #656d76; }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; background: var(--bg); color: var(--text); padding: 16px; max-width: 720px; margin: 0 auto; }
    h1 { font-size: 20px; text-align: center; margin-bottom: 4px; }
    .subtitle { text-align: center; color: var(--muted); font-size: 13px; margin-bottom: 16px; }
    .tabs { display: flex; gap: 6px; margin-bottom: 12px; }
    .tab { flex: 1; text-align: center; padding: 10px 6px; border-radius: 8px; cursor: pointer; font-size: 13px; font-weight: 600; border: 2px solid var(--border); background: var(--card); transition: all .2s; }
    .tab.active-1 { background: #dbeafe; border-color: var(--blue); color: var(--blue); }
    .sentence-card { display: flex; align-items: center; gap: 10px; padding: 10px 14px; margin-bottom: 6px; background: var(--card); border: 1px solid var(--border); border-radius: 8px; transition: all .15s; cursor: pointer;}
    .sentence-card.playing { border-color: var(--blue); box-shadow: 0 0 0 2px rgba(47,129,247,.2); }
    .num { font-size: 12px; font-weight: 700; color: var(--muted); min-width: 22px; }
    .text { flex: 1; font-size: 14px; line-height: 1.5; }
    .btn { width: 34px; height: 34px; border-radius: 50%; border: none; background: var(--blue); color: #fff; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
    .autoplay-bar { display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 16px; }
    #autoBtn.running { background: var(--blue); color: #fff; border: 2px solid var(--blue); border-radius: 8px; padding: 8px 18px; font-weight: 600; }
    #autoBtn { border: 2px solid var(--blue); background: #fff; color: var(--blue); border-radius: 8px; padding: 8px 18px; font-weight: 600; cursor: pointer; }
  </style>
</head>
<body>
  <h1>ðŸŽ¤ TOEFL 2026 Listen & Repeat</h1>
  <p class="subtitle">çš“å®‡ â€” ä½¿ç”¨å½•éŸ³æ–‡ä»¶ç‰ˆæœ¬</p>

  <div class="autoplay-bar">
    <button id="autoBtn" onclick="toggleAuto()">â–¶ è‡ªåŠ¨è¿žæ’­</button>
    <label style="font-size: 12px; color: var(--muted);">é—´éš” 
        <select id="pauseSec">
            <option value="2">2s</option>
            <option value="3" selected>3s</option>
            <option value="5">5s</option>
        </select>
    </label>
  </div>

  <div id="list"></div>

  <audio id="mainAudio" src="audio1.mp3"></audio>

  <script>
    // These are your provided timecodes (start, end) in seconds
    const DATA = [
      { start: 0.02, end: 1.32, text: "Welcome to the campus bookstore." },
      { start: 1.92, end: 3.68, text: "We sell textbooks and school supplies." },
      { start: 4.34, end: 5.64, text: "New books are on the first floor." },
      { start: 6.16, end: 8.04, text: "Used books are cheaper and easier to find." },
      { start: 8.64, end: 10.76, text: "You can find notebooks and pens over there." },
      { start: 11.30, end: 13.00, text: "The checkout counter is near the front door." },
      { start: 13.32, end: 15.22, text: "We accept both cash and credit cards." },
      { start: 15.84, end: 18.14, text: "Student discounts are available with your ID card." },
      { start: 18.52, end: 21.04, text: "The return policy allows exchanges within two weeks." },
      { start: 21.64, end: 23.42, text: "Please keep your receipt if you want a refund." },
      { start: 24.16, end: 26.44, text: "Our store hours are from 9 to 6 on weekdays." },
      { start: 27.00, end: 28.90, text: "We also have a small cafe in the back corner." },
      { start: 29.16, end: 33.80, text: "You can order coffee and sandwiches while you browse." },
      { start: 33.80, end: 38.60, text: "The bestseller section is right next to the main entrance." },
      { start: 38.60, end: 43.38, text: "We carry a wide selection of academic journals as well. If we don't have a book in stock, we can order it for you. Online orders can be picked up at the service desk downstairs." },
      { start: 44.22, end: 49.14, text: "During finals week, the store stays open until 10 at night." },
      { start: 49.14, end: 53.60, text: "There's a study lounge upstairs where you can read before buying. Feel free to ask any of our staff if you need help finding something." }
    ];

    const audio = document.getElementById('mainAudio');
    const list = document.getElementById('list');
    let autoMode = false;
    let currentIndex = -1;

    // Build the list
    DATA.forEach((item, idx) => {
      const card = document.createElement('div');
      card.className = 'sentence-card';
      card.id = `card-${idx}`;
      card.onclick = () => playSegment(idx);
      card.innerHTML = `<span class="num">${idx+1}</span><span class="text">${item.text}</span><div class="btn">â–¶</div>`;
      list.appendChild(card);
    });

    function playSegment(idx) {
      currentIndex = idx;
      const segment = DATA[idx];
      
      // UI update
      document.querySelectorAll('.sentence-card').forEach(c => c.classList.remove('playing'));
      document.getElementById(`card-${idx}`).classList.add('playing');

      audio.currentTime = segment.start;
      audio.play();

      // Check for end of segment
      const checkEnd = () => {
        if (audio.currentTime >= segment.end) {
          audio.pause();
          audio.removeEventListener('timeupdate', checkEnd);
          document.getElementById(`card-${idx}`).classList.remove('playing');
          
          if (autoMode && currentIndex < DATA.length - 1) {
            const pause = parseInt(document.getElementById('pauseSec').value) * 1000;
            setTimeout(() => playSegment(currentIndex + 1), pause);
          } else if (autoMode && currentIndex === DATA.length - 1) {
            stopAuto();
          }
        }
      };
      audio.addEventListener('timeupdate', checkEnd);
    }

    function toggleAuto() {
      if(autoMode) { stopAuto(); return; }
      autoMode = true;
      document.getElementById('autoBtn').classList.add('running');
      document.getElementById('autoBtn').textContent = 'â¸ æš‚åœè¿žæ’­';
      playSegment(0);
    }

    function stopAuto() {
      autoMode = false;
      audio.pause();
      document.getElementById('autoBtn').classList.remove('running');
      document.getElementById('autoBtn').textContent = 'â–¶ è‡ªåŠ¨è¿žæ’­';
      document.querySelectorAll('.sentence-card').forEach(c => c.classList.remove('playing'));
    }
  </script>
</body>
</html>
